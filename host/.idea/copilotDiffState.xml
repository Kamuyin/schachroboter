<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/src/main/java/org/example/ui/BoardView.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/src/main/java/org/example/ui/BoardView.java" />
              <option name="originalContent" value="package org.example.ui;&#10;&#10;import javafx.geometry.Insets;&#10;import javafx.geometry.Pos;&#10;import javafx.scene.control.*;&#10;import javafx.scene.layout.*;&#10;import javafx.scene.text.Font;&#10;import javafx.scene.text.FontWeight;&#10;import org.example.model.*;&#10;&#10;import java.util.List;&#10;import java.util.Optional;&#10;import java.util.function.Consumer;&#10;&#10;public class BoardView {&#10;    private final ChessBoard chessBoard;&#10;    private final GridPane boardGrid;&#10;    private final SquareView[][] squares;&#10;    private Position selectedPosition;&#10;    private final Consumer&lt;Move&gt; onMoveCallback;&#10;    private List&lt;Position&gt; highlightedMoves;&#10;&#10;    public BoardView(ChessBoard chessBoard, Consumer&lt;Move&gt; onMoveCallback) {&#10;        this.chessBoard = chessBoard;&#10;        this.onMoveCallback = onMoveCallback;&#10;        this.squares = new SquareView[8][8];&#10;        this.boardGrid = new GridPane();&#10;        this.selectedPosition = null;&#10;        this.highlightedMoves = List.of();&#10;&#10;        setupBoard();&#10;    }&#10;&#10;    private void setupBoard() {&#10;        boardGrid.setAlignment(Pos.CENTER);&#10;        boardGrid.setPadding(new Insets(10));&#10;        boardGrid.setHgap(0);&#10;        boardGrid.setVgap(0);&#10;&#10;        // Add column labels (a-h)&#10;        for (int col = 0; col &lt; 8; col++) {&#10;            Label label = new Label(String.valueOf((char) ('a' + col)));&#10;            label.setFont(Font.font(&quot;Segoe UI&quot;, FontWeight.BOLD, 12));&#10;            label.setAlignment(Pos.CENTER);&#10;            label.setPrefWidth(70);&#10;            boardGrid.add(label, col + 1, 0);&#10;        }&#10;&#10;        // Add row labels (8-1) and squares&#10;        for (int row = 0; row &lt; 8; row++) {&#10;            Label label = new Label(String.valueOf(8 - row));&#10;            label.setFont(Font.font(&quot;Segoe UI&quot;, FontWeight.BOLD, 12));&#10;            label.setAlignment(Pos.CENTER);&#10;            label.setPrefHeight(70);&#10;            boardGrid.add(label, 0, row + 1);&#10;&#10;            for (int col = 0; col &lt; 8; col++) {&#10;                Position pos = new Position(row, col);&#10;                boolean isLight = (row + col) % 2 == 0;&#10;                SquareView square = new SquareView(pos, isLight);&#10;                square.setOnClick(() -&gt; handleSquareClick(pos));&#10;&#10;                squares[row][col] = square;&#10;                boardGrid.add(square.getView(), col + 1, row + 1);&#10;            }&#10;        }&#10;&#10;        // Add column labels at bottom&#10;        for (int col = 0; col &lt; 8; col++) {&#10;            Label label = new Label(String.valueOf((char) ('a' + col)));&#10;            label.setFont(Font.font(&quot;Segoe UI&quot;, FontWeight.BOLD, 12));&#10;            label.setAlignment(Pos.CENTER);&#10;            label.setPrefWidth(70);&#10;            boardGrid.add(label, col + 1, 9);&#10;        }&#10;&#10;        refresh();&#10;    }&#10;&#10;    private void handleSquareClick(Position pos) {&#10;        if (selectedPosition == null) {&#10;            // First click - select piece&#10;            Piece piece = chessBoard.getPiece(pos);&#10;            if (piece != null &amp;&amp; piece.getColor() == chessBoard.getCurrentTurn()) {&#10;                selectedPosition = pos;&#10;                highlightSquare(pos, true);&#10;&#10;                // Highlight legal moves for this piece&#10;                highlightedMoves = chessBoard.getLegalMovesFrom(pos);&#10;                for (Position legalPos : highlightedMoves) {&#10;                    squares[legalPos.row()][legalPos.col()].setLegalMove(true);&#10;                }&#10;            }&#10;        } else {&#10;            // Second click - try to move&#10;            if (pos.equals(selectedPosition)) {&#10;                // Deselect&#10;                clearHighlights();&#10;                selectedPosition = null;&#10;            } else {&#10;                Position from = selectedPosition;&#10;                Piece movingPiece = chessBoard.getPiece(from);&#10;                Piece capturedPiece = chessBoard.getPiece(pos);&#10;&#10;                clearHighlights();&#10;&#10;                // Check if promotion is needed&#10;                if (chessBoard.isPromotion(from, pos)) {&#10;                    Optional&lt;PieceType&gt; promotionChoice = showPromotionDialog(movingPiece.getColor());&#10;                    if (promotionChoice.isPresent()) {&#10;                        if (chessBoard.makeMove(from, pos, promotionChoice.get())) {&#10;                            Move move = new Move(from, pos, movingPiece, capturedPiece);&#10;                            onMoveCallback.accept(move);&#10;                        }&#10;                    }&#10;                } else {&#10;                    if (chessBoard.makeMove(from, pos)) {&#10;                        Move move = new Move(from, pos, movingPiece, capturedPiece);&#10;                        onMoveCallback.accept(move);&#10;                    }&#10;                }&#10;&#10;                selectedPosition = null;&#10;            }&#10;        }&#10;    }&#10;&#10;    private void clearHighlights() {&#10;        if (selectedPosition != null) {&#10;            highlightSquare(selectedPosition, false);&#10;        }&#10;        for (Position pos : highlightedMoves) {&#10;            squares[pos.row()][pos.col()].setLegalMove(false);&#10;        }&#10;        highlightedMoves = List.of();&#10;    }&#10;&#10;    private Optional&lt;PieceType&gt; showPromotionDialog(PieceColor color) {&#10;        Dialog&lt;PieceType&gt; dialog = new Dialog&lt;&gt;();&#10;        dialog.setTitle(&quot;Pawn Promotion&quot;);&#10;        dialog.setHeaderText(&quot;Choose a piece to promote to:&quot;);&#10;&#10;        ButtonType queenButton = new ButtonType(&quot;Queen&quot;, ButtonBar.ButtonData.OK_DONE);&#10;        ButtonType rookButton = new ButtonType(&quot;Rook&quot;, ButtonBar.ButtonData.OK_DONE);&#10;        ButtonType bishopButton = new ButtonType(&quot;Bishop&quot;, ButtonBar.ButtonData.OK_DONE);&#10;        ButtonType knightButton = new ButtonType(&quot;Knight&quot;, ButtonBar.ButtonData.OK_DONE);&#10;        ButtonType cancelButton = new ButtonType(&quot;Cancel&quot;, ButtonBar.ButtonData.CANCEL_CLOSE);&#10;&#10;        dialog.getDialogPane().getButtonTypes().addAll(queenButton, rookButton, bishopButton, knightButton, cancelButton);&#10;&#10;        // Create visual selection&#10;        HBox box = new HBox(20);&#10;        box.setAlignment(Pos.CENTER);&#10;        box.setPadding(new Insets(20));&#10;&#10;        Label queenLabel = new Label(color == PieceColor.WHITE ? &quot;♕&quot; : &quot;♛&quot;);&#10;        Label rookLabel = new Label(color == PieceColor.WHITE ? &quot;♖&quot; : &quot;♜&quot;);&#10;        Label bishopLabel = new Label(color == PieceColor.WHITE ? &quot;♗&quot; : &quot;♝&quot;);&#10;        Label knightLabel = new Label(color == PieceColor.WHITE ? &quot;♘&quot; : &quot;♞&quot;);&#10;&#10;        queenLabel.setFont(Font.font(48));&#10;        rookLabel.setFont(Font.font(48));&#10;        bishopLabel.setFont(Font.font(48));&#10;        knightLabel.setFont(Font.font(48));&#10;&#10;        box.getChildren().addAll(queenLabel, rookLabel, bishopLabel, knightLabel);&#10;        dialog.getDialogPane().setContent(box);&#10;&#10;        dialog.setResultConverter(buttonType -&gt; {&#10;            if (buttonType == queenButton) return PieceType.QUEEN;&#10;            if (buttonType == rookButton) return PieceType.ROOK;&#10;            if (buttonType == bishopButton) return PieceType.BISHOP;&#10;            if (buttonType == knightButton) return PieceType.KNIGHT;&#10;            return null;&#10;        });&#10;&#10;        return dialog.showAndWait();&#10;    }&#10;&#10;    private void highlightSquare(Position pos, boolean highlight) {&#10;        if (pos.isValid()) {&#10;            squares[pos.row()][pos.col()].setHighlighted(highlight);&#10;        }&#10;    }&#10;&#10;    public void refresh() {&#10;        for (int row = 0; row &lt; 8; row++) {&#10;            for (int col = 0; col &lt; 8; col++) {&#10;                Position pos = new Position(row, col);&#10;                Piece piece = chessBoard.getPiece(pos);&#10;                squares[row][col].setPiece(piece);&#10;                squares[row][col].setHighlighted(false);&#10;                squares[row][col].setLegalMove(false);&#10;            }&#10;        }&#10;        selectedPosition = null;&#10;        highlightedMoves = List.of();&#10;    }&#10;&#10;    public Pane getView() {&#10;        VBox container = new VBox(boardGrid);&#10;        container.setAlignment(Pos.CENTER);&#10;        return container;&#10;    }&#10;}&#10;" />
              <option name="updatedContent" value="package org.example.ui;&#10;&#10;import javafx.geometry.Insets;&#10;import javafx.geometry.Pos;&#10;import javafx.scene.control.*;&#10;import javafx.scene.layout.*;&#10;import javafx.scene.text.Font;&#10;import org.example.model.*;&#10;&#10;import java.util.List;&#10;import java.util.Optional;&#10;import java.util.function.Consumer;&#10;&#10;public class BoardView {&#10;    private final ChessBoard chessBoard;&#10;    private final GridPane boardGrid;&#10;    private final SquareView[][] squares;&#10;    private Position selectedPosition;&#10;    private final Consumer&lt;Move&gt; onMoveCallback;&#10;    private List&lt;Position&gt; highlightedMoves;&#10;&#10;    public BoardView(ChessBoard chessBoard, Consumer&lt;Move&gt; onMoveCallback) {&#10;        this.chessBoard = chessBoard;&#10;        this.onMoveCallback = onMoveCallback;&#10;        this.squares = new SquareView[8][8];&#10;        this.boardGrid = new GridPane();&#10;        this.selectedPosition = null;&#10;        this.highlightedMoves = List.of();&#10;&#10;        setupBoard();&#10;    }&#10;&#10;    private void setupBoard() {&#10;        boardGrid.setAlignment(Pos.CENTER);&#10;        boardGrid.setHgap(0);&#10;        boardGrid.setVgap(0);&#10;&#10;        // Add column labels (a-h)&#10;        for (int col = 0; col &lt; 8; col++) {&#10;            Label label = new Label(String.valueOf((char) ('a' + col)));&#10;            label.setAlignment(Pos.CENTER);&#10;            label.setPrefWidth(65);&#10;            boardGrid.add(label, col + 1, 0);&#10;        }&#10;&#10;        // Add row labels (8-1) and squares&#10;        for (int row = 0; row &lt; 8; row++) {&#10;            Label label = new Label(String.valueOf(8 - row));&#10;            label.setAlignment(Pos.CENTER);&#10;            label.setPrefHeight(65);&#10;            boardGrid.add(label, 0, row + 1);&#10;&#10;            for (int col = 0; col &lt; 8; col++) {&#10;                Position pos = new Position(row, col);&#10;                boolean isLight = (row + col) % 2 == 0;&#10;                SquareView square = new SquareView(pos, isLight);&#10;                square.setOnClick(() -&gt; handleSquareClick(pos));&#10;&#10;                squares[row][col] = square;&#10;                boardGrid.add(square.getView(), col + 1, row + 1);&#10;            }&#10;        }&#10;&#10;        // Add column labels at bottom&#10;        for (int col = 0; col &lt; 8; col++) {&#10;            Label label = new Label(String.valueOf((char) ('a' + col)));&#10;            label.setAlignment(Pos.CENTER);&#10;            label.setPrefWidth(65);&#10;            boardGrid.add(label, col + 1, 9);&#10;        }&#10;&#10;        refresh();&#10;    }&#10;&#10;    private void handleSquareClick(Position pos) {&#10;        if (selectedPosition == null) {&#10;            // First click - select piece&#10;            Piece piece = chessBoard.getPiece(pos);&#10;            if (piece != null &amp;&amp; piece.getColor() == chessBoard.getCurrentTurn()) {&#10;                selectedPosition = pos;&#10;                highlightSquare(pos, true);&#10;&#10;                // Highlight legal moves for this piece&#10;                highlightedMoves = chessBoard.getLegalMovesFrom(pos);&#10;                for (Position legalPos : highlightedMoves) {&#10;                    squares[legalPos.row()][legalPos.col()].setLegalMove(true);&#10;                }&#10;            }&#10;        } else {&#10;            // Second click - try to move&#10;            if (pos.equals(selectedPosition)) {&#10;                // Deselect&#10;                clearHighlights();&#10;                selectedPosition = null;&#10;            } else {&#10;                Position from = selectedPosition;&#10;                Piece movingPiece = chessBoard.getPiece(from);&#10;                Piece capturedPiece = chessBoard.getPiece(pos);&#10;&#10;                clearHighlights();&#10;&#10;                // Check if promotion is needed&#10;                if (chessBoard.isPromotion(from, pos)) {&#10;                    Optional&lt;PieceType&gt; promotionChoice = showPromotionDialog(movingPiece.getColor());&#10;                    if (promotionChoice.isPresent()) {&#10;                        if (chessBoard.makeMove(from, pos, promotionChoice.get())) {&#10;                            Move move = new Move(from, pos, movingPiece, capturedPiece);&#10;                            onMoveCallback.accept(move);&#10;                        }&#10;                    }&#10;                } else {&#10;                    if (chessBoard.makeMove(from, pos)) {&#10;                        Move move = new Move(from, pos, movingPiece, capturedPiece);&#10;                        onMoveCallback.accept(move);&#10;                    }&#10;                }&#10;&#10;                selectedPosition = null;&#10;            }&#10;        }&#10;    }&#10;&#10;    private void clearHighlights() {&#10;        if (selectedPosition != null) {&#10;            highlightSquare(selectedPosition, false);&#10;        }&#10;        for (Position pos : highlightedMoves) {&#10;            squares[pos.row()][pos.col()].setLegalMove(false);&#10;        }&#10;        highlightedMoves = List.of();&#10;    }&#10;&#10;    private Optional&lt;PieceType&gt; showPromotionDialog(PieceColor color) {&#10;        Dialog&lt;PieceType&gt; dialog = new Dialog&lt;&gt;();&#10;        dialog.setTitle(&quot;Pawn Promotion&quot;);&#10;        dialog.setHeaderText(&quot;Choose promotion piece:&quot;);&#10;&#10;        ButtonType queenButton = new ButtonType(&quot;Queen&quot;, ButtonBar.ButtonData.OK_DONE);&#10;        ButtonType rookButton = new ButtonType(&quot;Rook&quot;, ButtonBar.ButtonData.OK_DONE);&#10;        ButtonType bishopButton = new ButtonType(&quot;Bishop&quot;, ButtonBar.ButtonData.OK_DONE);&#10;        ButtonType knightButton = new ButtonType(&quot;Knight&quot;, ButtonBar.ButtonData.OK_DONE);&#10;        ButtonType cancelButton = new ButtonType(&quot;Cancel&quot;, ButtonBar.ButtonData.CANCEL_CLOSE);&#10;&#10;        dialog.getDialogPane().getButtonTypes().addAll(queenButton, rookButton, bishopButton, knightButton, cancelButton);&#10;&#10;        HBox box = new HBox(15);&#10;        box.setAlignment(Pos.CENTER);&#10;        box.setPadding(new Insets(15));&#10;&#10;        Label queenLabel = new Label(color == PieceColor.WHITE ? &quot;♕&quot; : &quot;♛&quot;);&#10;        Label rookLabel = new Label(color == PieceColor.WHITE ? &quot;♖&quot; : &quot;♜&quot;);&#10;        Label bishopLabel = new Label(color == PieceColor.WHITE ? &quot;♗&quot; : &quot;♝&quot;);&#10;        Label knightLabel = new Label(color == PieceColor.WHITE ? &quot;♘&quot; : &quot;♞&quot;);&#10;&#10;        queenLabel.setFont(Font.font(40));&#10;        rookLabel.setFont(Font.font(40));&#10;        bishopLabel.setFont(Font.font(40));&#10;        knightLabel.setFont(Font.font(40));&#10;&#10;        box.getChildren().addAll(queenLabel, rookLabel, bishopLabel, knightLabel);&#10;        dialog.getDialogPane().setContent(box);&#10;&#10;        dialog.setResultConverter(buttonType -&gt; {&#10;            if (buttonType == queenButton) return PieceType.QUEEN;&#10;            if (buttonType == rookButton) return PieceType.ROOK;&#10;            if (buttonType == bishopButton) return PieceType.BISHOP;&#10;            if (buttonType == knightButton) return PieceType.KNIGHT;&#10;            return null;&#10;        });&#10;&#10;        return dialog.showAndWait();&#10;    }&#10;&#10;    private void highlightSquare(Position pos, boolean highlight) {&#10;        if (pos.isValid()) {&#10;            squares[pos.row()][pos.col()].setHighlighted(highlight);&#10;        }&#10;    }&#10;&#10;    public void refresh() {&#10;        for (int row = 0; row &lt; 8; row++) {&#10;            for (int col = 0; col &lt; 8; col++) {&#10;                Position pos = new Position(row, col);&#10;                Piece piece = chessBoard.getPiece(pos);&#10;                squares[row][col].setPiece(piece);&#10;                squares[row][col].setHighlighted(false);&#10;                squares[row][col].setLegalMove(false);&#10;            }&#10;        }&#10;        selectedPosition = null;&#10;        highlightedMoves = List.of();&#10;    }&#10;&#10;    public Pane getView() {&#10;        return boardGrid;&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/src/main/java/org/example/ui/GameLogView.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/src/main/java/org/example/ui/GameLogView.java" />
              <option name="originalContent" value="package org.example.ui;&#10;&#10;import javafx.collections.FXCollections;&#10;import javafx.collections.ObservableList;&#10;import javafx.geometry.Insets;&#10;import javafx.scene.control.ListView;&#10;import javafx.scene.layout.VBox;&#10;import org.example.model.Move;&#10;import org.example.model.PieceColor;&#10;&#10;public class GameLogView {&#10;    private final ListView&lt;String&gt; moveListView;&#10;    private final ObservableList&lt;String&gt; moves;&#10;    private int moveNumber;&#10;&#10;    public GameLogView() {&#10;        this.moves = FXCollections.observableArrayList();&#10;        this.moveListView = new ListView&lt;&gt;(moves);&#10;        this.moveNumber = 1;&#10;&#10;        setupView();&#10;    }&#10;&#10;    private void setupView() {&#10;        moveListView.setPrefHeight(400);&#10;    }&#10;&#10;    public void addMove(Move move) {&#10;        String moveText = String.format(&quot;%d. %s %s&quot;,&#10;            moveNumber,&#10;            move.piece().getColor() == PieceColor.WHITE ? &quot;White&quot; : &quot;Black&quot;,&#10;            move.toString()&#10;        );&#10;&#10;        if (move.capturedPiece() != null) {&#10;            moveText += &quot; (captured &quot; + move.capturedPiece().getType() + &quot;)&quot;;&#10;        }&#10;&#10;        moves.add(moveText);&#10;        moveListView.scrollTo(moves.size() - 1);&#10;&#10;        if (move.piece().getColor() == PieceColor.BLACK) {&#10;            moveNumber++;&#10;        }&#10;    }&#10;&#10;    public void clear() {&#10;        moves.clear();&#10;        moveNumber = 1;&#10;    }&#10;&#10;    public VBox getView() {&#10;        VBox container = new VBox(5);&#10;        container.setPadding(new Insets(5));&#10;        container.getChildren().add(moveListView);&#10;        return container;&#10;    }&#10;}&#10;" />
              <option name="updatedContent" value="package org.example.ui;&#10;&#10;import javafx.collections.FXCollections;&#10;import javafx.collections.ObservableList;&#10;import javafx.geometry.Insets;&#10;import javafx.scene.control.ListView;&#10;import javafx.scene.layout.VBox;&#10;import org.example.model.Move;&#10;import org.example.model.PieceColor;&#10;&#10;public class GameLogView {&#10;    private final ListView&lt;String&gt; moveListView;&#10;    private final ObservableList&lt;String&gt; moves;&#10;    private int moveNumber;&#10;&#10;    public GameLogView() {&#10;        this.moves = FXCollections.observableArrayList();&#10;        this.moveListView = new ListView&lt;&gt;(moves);&#10;        this.moveNumber = 1;&#10;&#10;        setupView();&#10;    }&#10;&#10;    private void setupView() {&#10;        moveListView.setPrefHeight(200);&#10;    }&#10;&#10;    public void addMove(Move move) {&#10;        String moveText;&#10;&#10;        if (move.piece().getColor() == PieceColor.WHITE) {&#10;            moveText = String.format(&quot;%d. %s&quot;, moveNumber, formatMove(move));&#10;        } else {&#10;            moveText = String.format(&quot;%d. ... %s&quot;, moveNumber, formatMove(move));&#10;            moveNumber++;&#10;        }&#10;&#10;        moves.add(moveText);&#10;        moveListView.scrollTo(moves.size() - 1);&#10;    }&#10;&#10;    private String formatMove(Move move) {&#10;        String piece = move.piece().getType().name().substring(0, 1);&#10;        if (move.piece().getType().name().equals(&quot;PAWN&quot;)) {&#10;            piece = &quot;&quot;;&#10;        }&#10;&#10;        String capture = move.capturedPiece() != null ? &quot;x&quot; : &quot;&quot;;&#10;        return piece + capture + move.to().toChessNotation();&#10;    }&#10;&#10;    public void clear() {&#10;        moves.clear();&#10;        moveNumber = 1;&#10;    }&#10;&#10;    public VBox getView() {&#10;        VBox container = new VBox();&#10;        container.setPadding(new Insets(5));&#10;        container.getChildren().add(moveListView);&#10;        VBox.setVgrow(moveListView, javafx.scene.layout.Priority.ALWAYS);&#10;        return container;&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/src/main/java/org/example/ui/PlayerInfoView.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/src/main/java/org/example/ui/PlayerInfoView.java" />
              <option name="originalContent" value="package org.example.ui;&#10;&#10;import javafx.geometry.Insets;&#10;import javafx.geometry.Pos;&#10;import javafx.scene.control.Label;&#10;import javafx.scene.layout.VBox;&#10;import javafx.scene.text.Font;&#10;import javafx.scene.text.FontWeight;&#10;import org.example.model.ChessBoard;&#10;import org.example.model.Piece;&#10;import org.example.model.PieceColor;&#10;&#10;import java.util.List;&#10;&#10;public class PlayerInfoView {&#10;    private final ChessBoard chessBoard;&#10;    private final Label currentTurnLabel;&#10;    private final Label whiteCapturedLabel;&#10;    private final Label blackCapturedLabel;&#10;    private final Label moveCountLabel;&#10;&#10;    public PlayerInfoView(ChessBoard chessBoard) {&#10;        this.chessBoard = chessBoard;&#10;        this.currentTurnLabel = new Label();&#10;        this.whiteCapturedLabel = new Label();&#10;        this.blackCapturedLabel = new Label();&#10;        this.moveCountLabel = new Label();&#10;&#10;        update();&#10;    }&#10;&#10;    public void update() {&#10;        // Current turn&#10;        PieceColor turn = chessBoard.getCurrentTurn();&#10;        currentTurnLabel.setText(&quot;Current Turn: &quot; + turn.toString());&#10;        currentTurnLabel.setFont(Font.font(&quot;Segoe UI&quot;, FontWeight.BOLD, 14));&#10;&#10;        // Move count&#10;        int moveCount = chessBoard.getMoveHistory().size();&#10;        moveCountLabel.setText(&quot;Moves: &quot; + moveCount);&#10;&#10;        // Captured pieces&#10;        List&lt;Piece&gt; whiteCaptured = chessBoard.getCapturedPieces(PieceColor.WHITE);&#10;        List&lt;Piece&gt; blackCaptured = chessBoard.getCapturedPieces(PieceColor.BLACK);&#10;&#10;        whiteCapturedLabel.setText(&quot;White Lost: &quot; + formatCapturedPieces(whiteCaptured));&#10;        blackCapturedLabel.setText(&quot;Black Lost: &quot; + formatCapturedPieces(blackCaptured));&#10;    }&#10;&#10;    private String formatCapturedPieces(List&lt;Piece&gt; pieces) {&#10;        if (pieces.isEmpty()) {&#10;            return &quot;None&quot;;&#10;        }&#10;&#10;        StringBuilder sb = new StringBuilder();&#10;        for (Piece piece : pieces) {&#10;            sb.append(piece.getSymbol()).append(&quot; &quot;);&#10;        }&#10;        return sb.toString().trim();&#10;    }&#10;&#10;    public VBox getView() {&#10;        VBox container = new VBox(10);&#10;        container.setPadding(new Insets(10));&#10;        container.setAlignment(Pos.TOP_LEFT);&#10;&#10;        // Current turn section&#10;        VBox turnBox = new VBox(5);&#10;        Label turnTitle = new Label(&quot;Game Status&quot;);&#10;        turnTitle.setFont(Font.font(&quot;Segoe UI&quot;, FontWeight.BOLD, 13));&#10;        turnBox.getChildren().addAll(turnTitle, currentTurnLabel, moveCountLabel);&#10;&#10;        // Captured pieces section&#10;        VBox capturedBox = new VBox(5);&#10;        Label capturedTitle = new Label(&quot;Captured Pieces&quot;);&#10;        capturedTitle.setFont(Font.font(&quot;Segoe UI&quot;, FontWeight.BOLD, 13));&#10;        capturedBox.getChildren().addAll(capturedTitle, blackCapturedLabel, whiteCapturedLabel);&#10;&#10;        container.getChildren().addAll(turnBox, capturedBox);&#10;        return container;&#10;    }&#10;}&#10;" />
              <option name="updatedContent" value="package org.example.ui;&#10;&#10;import javafx.geometry.Insets;&#10;import javafx.scene.control.Label;&#10;import javafx.scene.control.Separator;&#10;import javafx.scene.layout.VBox;&#10;import org.example.model.ChessBoard;&#10;import org.example.model.Piece;&#10;import org.example.model.PieceColor;&#10;&#10;import java.util.List;&#10;&#10;public class PlayerInfoView {&#10;    private final ChessBoard chessBoard;&#10;    private final Label currentTurnLabel;&#10;    private final Label whiteCapturedLabel;&#10;    private final Label blackCapturedLabel;&#10;    private final Label moveCountLabel;&#10;    private final Label statusLabel;&#10;&#10;    public PlayerInfoView(ChessBoard chessBoard) {&#10;        this.chessBoard = chessBoard;&#10;        this.currentTurnLabel = new Label();&#10;        this.whiteCapturedLabel = new Label();&#10;        this.blackCapturedLabel = new Label();&#10;        this.moveCountLabel = new Label();&#10;        this.statusLabel = new Label();&#10;&#10;        update();&#10;    }&#10;&#10;    public void update() {&#10;        // Current turn&#10;        PieceColor turn = chessBoard.getCurrentTurn();&#10;        currentTurnLabel.setText(&quot;Turn: &quot; + turn.toString());&#10;&#10;        // Move count&#10;        int moveCount = chessBoard.getMoveHistory().size();&#10;        moveCountLabel.setText(&quot;Moves: &quot; + moveCount);&#10;&#10;        // Game status&#10;        if (chessBoard.isCheckmate()) {&#10;            statusLabel.setText(&quot;Status: Checkmate&quot;);&#10;            statusLabel.setStyle(&quot;-fx-text-fill: red;&quot;);&#10;        } else if (chessBoard.isStalemate()) {&#10;            statusLabel.setText(&quot;Status: Stalemate&quot;);&#10;            statusLabel.setStyle(&quot;-fx-text-fill: orange;&quot;);&#10;        } else if (chessBoard.isInCheck()) {&#10;            statusLabel.setText(&quot;Status: Check&quot;);&#10;            statusLabel.setStyle(&quot;-fx-text-fill: red;&quot;);&#10;        } else {&#10;            statusLabel.setText(&quot;Status: Active&quot;);&#10;            statusLabel.setStyle(&quot;&quot;);&#10;        }&#10;&#10;        // Captured pieces&#10;        List&lt;Piece&gt; whiteCaptured = chessBoard.getCapturedPieces(PieceColor.WHITE);&#10;        List&lt;Piece&gt; blackCaptured = chessBoard.getCapturedPieces(PieceColor.BLACK);&#10;&#10;        whiteCapturedLabel.setText(&quot;White lost: &quot; + formatCapturedPieces(whiteCaptured));&#10;        blackCapturedLabel.setText(&quot;Black lost: &quot; + formatCapturedPieces(blackCaptured));&#10;    }&#10;&#10;    private String formatCapturedPieces(List&lt;Piece&gt; pieces) {&#10;        if (pieces.isEmpty()) {&#10;            return &quot;None&quot;;&#10;        }&#10;&#10;        StringBuilder sb = new StringBuilder();&#10;        for (Piece piece : pieces) {&#10;            sb.append(piece.getSymbol()).append(&quot; &quot;);&#10;        }&#10;        return sb.toString().trim();&#10;    }&#10;&#10;    public VBox getView() {&#10;        VBox container = new VBox(8);&#10;        container.setPadding(new Insets(10));&#10;&#10;        Label gameStatusTitle = new Label(&quot;Game Status&quot;);&#10;        gameStatusTitle.setStyle(&quot;-fx-font-weight: bold;&quot;);&#10;&#10;        VBox statusBox = new VBox(5);&#10;        statusBox.getChildren().addAll(&#10;                currentTurnLabel,&#10;                moveCountLabel,&#10;                statusLabel&#10;        );&#10;&#10;        Label capturedTitle = new Label(&quot;Captured Pieces&quot;);&#10;        capturedTitle.setStyle(&quot;-fx-font-weight: bold;&quot;);&#10;&#10;        VBox capturedBox = new VBox(5);&#10;        capturedBox.getChildren().addAll(&#10;                blackCapturedLabel,&#10;                whiteCapturedLabel&#10;        );&#10;&#10;        container.getChildren().addAll(&#10;                gameStatusTitle,&#10;                statusBox,&#10;                new Separator(),&#10;                capturedTitle,&#10;                capturedBox&#10;        );&#10;&#10;        return container;&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/src/main/java/org/example/ui/SquareView.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/src/main/java/org/example/ui/SquareView.java" />
              <option name="originalContent" value="package org.example.ui;&#10;&#10;import javafx.geometry.Pos;&#10;import javafx.scene.control.Label;&#10;import javafx.scene.layout.StackPane;&#10;import javafx.scene.paint.Color;&#10;import javafx.scene.shape.Circle;&#10;import javafx.scene.text.Font;&#10;import org.example.model.Piece;&#10;import org.example.model.Position;&#10;&#10;public class SquareView {&#10;    private final Position position;&#10;    private final boolean isLight;&#10;    private final StackPane pane;&#10;    private final Label pieceLabel;&#10;    private final Circle legalMoveIndicator;&#10;    private Piece piece;&#10;    private boolean highlighted;&#10;    private boolean isLegalMove;&#10;&#10;    private static final String LIGHT_SQUARE = &quot;#EEEED2&quot;;&#10;    private static final String DARK_SQUARE = &quot;#769656&quot;;&#10;    private static final String HIGHLIGHT_COLOR = &quot;#F6F669&quot;;&#10;    private static final String LEGAL_MOVE_COLOR = &quot;#B9CA43&quot;;&#10;&#10;    public SquareView(Position position, boolean isLight) {&#10;        this.position = position;&#10;        this.isLight = isLight;&#10;        this.pane = new StackPane();&#10;        this.pieceLabel = new Label();&#10;        this.legalMoveIndicator = new Circle(8);&#10;        this.highlighted = false;&#10;        this.isLegalMove = false;&#10;&#10;        setupView();&#10;    }&#10;&#10;    private void setupView() {&#10;        pane.setPrefSize(70, 70);&#10;        pane.setMinSize(70, 70);&#10;        pane.setMaxSize(70, 70);&#10;        pane.setAlignment(Pos.CENTER);&#10;&#10;        pieceLabel.setFont(Font.font(&quot;Segoe UI Symbol&quot;, 44));&#10;        pieceLabel.setAlignment(Pos.CENTER);&#10;&#10;        legalMoveIndicator.setFill(Color.web(&quot;#646464&quot;, 0.3));&#10;        legalMoveIndicator.setVisible(false);&#10;&#10;        pane.getChildren().addAll(legalMoveIndicator, pieceLabel);&#10;        updateBackground();&#10;    }&#10;&#10;    public void setPiece(Piece piece) {&#10;        this.piece = piece;&#10;        if (piece != null) {&#10;            pieceLabel.setText(piece.getSymbol());&#10;        } else {&#10;            pieceLabel.setText(&quot;&quot;);&#10;        }&#10;    }&#10;&#10;    public void setHighlighted(boolean highlighted) {&#10;        this.highlighted = highlighted;&#10;        updateBackground();&#10;    }&#10;&#10;    public void setLegalMove(boolean isLegalMove) {&#10;        this.isLegalMove = isLegalMove;&#10;        legalMoveIndicator.setVisible(isLegalMove);&#10;        updateBackground();&#10;    }&#10;&#10;    private void updateBackground() {&#10;        String bgColor;&#10;        if (highlighted) {&#10;            bgColor = HIGHLIGHT_COLOR;&#10;        } else if (isLegalMove) {&#10;            bgColor = LEGAL_MOVE_COLOR;&#10;        } else {&#10;            bgColor = isLight ? LIGHT_SQUARE : DARK_SQUARE;&#10;        }&#10;&#10;        pane.setStyle(&quot;-fx-background-color: &quot; + bgColor + &quot;; -fx-border-color: transparent;&quot;);&#10;    }&#10;&#10;    public void setOnClick(Runnable action) {&#10;        pane.setOnMouseClicked(e -&gt; action.run());&#10;        pane.setOnMouseEntered(e -&gt; pane.setCursor(javafx.scene.Cursor.HAND));&#10;        pane.setOnMouseExited(e -&gt; pane.setCursor(javafx.scene.Cursor.DEFAULT));&#10;    }&#10;&#10;    public StackPane getView() {&#10;        return pane;&#10;    }&#10;}&#10;" />
              <option name="updatedContent" value="package org.example.ui;&#10;&#10;import javafx.geometry.Pos;&#10;import javafx.scene.control.Label;&#10;import javafx.scene.layout.StackPane;&#10;import javafx.scene.paint.Color;&#10;import javafx.scene.shape.Circle;&#10;import javafx.scene.text.Font;&#10;import org.example.model.Piece;&#10;import org.example.model.Position;&#10;&#10;public class SquareView {&#10;    private final Position position;&#10;    private final boolean isLight;&#10;    private final StackPane pane;&#10;    private final Label pieceLabel;&#10;    private final Circle legalMoveIndicator;&#10;    private Piece piece;&#10;    private boolean highlighted;&#10;    private boolean isLegalMove;&#10;&#10;    private static final String LIGHT_SQUARE = &quot;#F0D9B5&quot;;&#10;    private static final String DARK_SQUARE = &quot;#B58863&quot;;&#10;    private static final String HIGHLIGHT_COLOR = &quot;#F7F769&quot;;&#10;&#10;    public SquareView(Position position, boolean isLight) {&#10;        this.position = position;&#10;        this.isLight = isLight;&#10;        this.pane = new StackPane();&#10;        this.pieceLabel = new Label();&#10;        this.legalMoveIndicator = new Circle(6);&#10;        this.highlighted = false;&#10;        this.isLegalMove = false;&#10;&#10;        setupView();&#10;    }&#10;&#10;    private void setupView() {&#10;        pane.setPrefSize(65, 65);&#10;        pane.setMinSize(65, 65);&#10;        pane.setMaxSize(65, 65);&#10;        pane.setAlignment(Pos.CENTER);&#10;&#10;        pieceLabel.setFont(Font.font(&quot;Segoe UI Symbol&quot;, 40));&#10;        pieceLabel.setAlignment(Pos.CENTER);&#10;&#10;        legalMoveIndicator.setFill(Color.web(&quot;#555555&quot;, 0.4));&#10;        legalMoveIndicator.setVisible(false);&#10;&#10;        pane.getChildren().addAll(legalMoveIndicator, pieceLabel);&#10;        updateBackground();&#10;    }&#10;&#10;    public void setPiece(Piece piece) {&#10;        this.piece = piece;&#10;        if (piece != null) {&#10;            pieceLabel.setText(piece.getSymbol());&#10;        } else {&#10;            pieceLabel.setText(&quot;&quot;);&#10;        }&#10;    }&#10;&#10;    public void setHighlighted(boolean highlighted) {&#10;        this.highlighted = highlighted;&#10;        updateBackground();&#10;    }&#10;&#10;    public void setLegalMove(boolean isLegalMove) {&#10;        this.isLegalMove = isLegalMove;&#10;        legalMoveIndicator.setVisible(isLegalMove);&#10;        updateBackground();&#10;    }&#10;&#10;    private void updateBackground() {&#10;        String bgColor;&#10;        if (highlighted) {&#10;            bgColor = HIGHLIGHT_COLOR;&#10;        } else {&#10;            bgColor = isLight ? LIGHT_SQUARE : DARK_SQUARE;&#10;        }&#10;&#10;        pane.setStyle(&quot;-fx-background-color: &quot; + bgColor + &quot;;&quot;);&#10;    }&#10;&#10;    public void setOnClick(Runnable action) {&#10;        pane.setOnMouseClicked(e -&gt; action.run());&#10;        pane.setOnMouseEntered(e -&gt; pane.setCursor(javafx.scene.Cursor.HAND));&#10;        pane.setOnMouseExited(e -&gt; pane.setCursor(javafx.scene.Cursor.DEFAULT));&#10;    }&#10;&#10;    public StackPane getView() {&#10;        return pane;&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/src/main/java/org/example/ui/StatusBar.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/src/main/java/org/example/ui/StatusBar.java" />
              <option name="originalContent" value="package org.example.ui;&#10;&#10;import javafx.geometry.Insets;&#10;import javafx.scene.control.Label;&#10;import javafx.scene.layout.HBox;&#10;import javafx.scene.layout.Priority;&#10;import javafx.scene.layout.Region;&#10;import javafx.scene.paint.Color;&#10;import javafx.scene.text.Font;&#10;import javafx.scene.text.FontWeight;&#10;import org.example.model.ChessBoard;&#10;&#10;import java.time.LocalTime;&#10;import java.time.format.DateTimeFormatter;&#10;&#10;public class StatusBar {&#10;    private final ChessBoard chessBoard;&#10;    private final Label statusLabel;&#10;    private final Label timeLabel;&#10;    private final HBox statusBar;&#10;    private boolean isInCheck = false;&#10;&#10;    public StatusBar(ChessBoard chessBoard) {&#10;        this.chessBoard = chessBoard;&#10;        this.statusLabel = new Label();&#10;        this.timeLabel = new Label();&#10;        this.statusBar = new HBox(10);&#10;&#10;        setupView();&#10;        update();&#10;    }&#10;&#10;    private void setupView() {&#10;        statusBar.setPadding(new Insets(8, 10, 8, 10));&#10;&#10;        Region spacer = new Region();&#10;        HBox.setHgrow(spacer, Priority.ALWAYS);&#10;&#10;        statusBar.getChildren().addAll(statusLabel, spacer, timeLabel);&#10;    }&#10;&#10;    public void update() {&#10;        int moveCount = chessBoard.getMoveHistory().size();&#10;        String turn = chessBoard.getCurrentTurn().toString();&#10;&#10;        String status = &quot;Ready | Turn: &quot; + turn + &quot; | Moves: &quot; + moveCount;&#10;&#10;        if (isInCheck) {&#10;            status = &quot;CHECK! | Turn: &quot; + turn + &quot; | Moves: &quot; + moveCount;&#10;            statusLabel.setFont(Font.font(&quot;Segoe UI&quot;, FontWeight.BOLD, 12));&#10;            statusLabel.setTextFill(Color.RED);&#10;        } else {&#10;            statusLabel.setFont(Font.font(&quot;Segoe UI&quot;, FontWeight.NORMAL, 12));&#10;            statusLabel.setTextFill(Color.BLACK);&#10;        }&#10;&#10;        statusLabel.setText(status);&#10;&#10;        LocalTime now = LocalTime.now();&#10;        timeLabel.setText(now.format(DateTimeFormatter.ofPattern(&quot;HH:mm:ss&quot;)));&#10;    }&#10;&#10;    public void setCheckStatus(boolean inCheck) {&#10;        this.isInCheck = inCheck;&#10;        update();&#10;    }&#10;&#10;    public HBox getView() {&#10;        return statusBar;&#10;    }&#10;}&#10;" />
              <option name="updatedContent" value="package org.example.ui;&#10;&#10;import javafx.geometry.Insets;&#10;import javafx.scene.control.Label;&#10;import javafx.scene.layout.HBox;&#10;import javafx.scene.layout.Priority;&#10;import javafx.scene.layout.Region;&#10;import org.example.model.ChessBoard;&#10;&#10;public class StatusBar {&#10;    private final ChessBoard chessBoard;&#10;    private final Label statusLabel;&#10;    private final Label positionLabel;&#10;    private final Label infoLabel;&#10;    private final HBox statusBar;&#10;    private boolean isInCheck = false;&#10;&#10;    public StatusBar(ChessBoard chessBoard) {&#10;        this.chessBoard = chessBoard;&#10;        this.statusLabel = new Label();&#10;        this.positionLabel = new Label();&#10;        this.infoLabel = new Label();&#10;        this.statusBar = new HBox(15);&#10;&#10;        setupView();&#10;        update();&#10;    }&#10;&#10;    private void setupView() {&#10;        statusBar.setPadding(new Insets(5, 10, 5, 10));&#10;        statusBar.setStyle(&quot;-fx-border-color: #c0c0c0; -fx-border-width: 1 0 0 0; -fx-background-color: #f0f0f0;&quot;);&#10;&#10;        Region spacer = new Region();&#10;        HBox.setHgrow(spacer, Priority.ALWAYS);&#10;&#10;        statusBar.getChildren().addAll(statusLabel, spacer, positionLabel, infoLabel);&#10;    }&#10;&#10;    public void update() {&#10;        int moveCount = chessBoard.getMoveHistory().size();&#10;        String turn = chessBoard.getCurrentTurn().toString();&#10;&#10;        if (isInCheck) {&#10;            statusLabel.setText(&quot;CHECK! - &quot; + turn + &quot; to move&quot;);&#10;            statusLabel.setStyle(&quot;-fx-text-fill: red; -fx-font-weight: bold;&quot;);&#10;        } else {&#10;            statusLabel.setText(turn + &quot; to move&quot;);&#10;            statusLabel.setStyle(&quot;&quot;);&#10;        }&#10;&#10;        positionLabel.setText(&quot;Move: &quot; + moveCount);&#10;        infoLabel.setText(&quot;FEN: &quot; + chessBoard.getFen().substring(0, Math.min(30, chessBoard.getFen().length())) + &quot;...&quot;);&#10;    }&#10;&#10;    public void setCheckStatus(boolean inCheck) {&#10;        this.isInCheck = inCheck;&#10;        update();&#10;    }&#10;&#10;    public HBox getView() {&#10;        return statusBar;&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>